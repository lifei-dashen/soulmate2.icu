<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>恋爱画像测评表 | 灵魂伴侣测试</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// === 验证系统开始 ===
const AUTH_CONFIG = {
    SECRET_KEY: "MY_LOVE_SHOP_2026" // 必须与生成器一致
};

// 页面加载时运行
document.addEventListener("DOMContentLoaded", function() {
    checkLock(); // 检查是否需要锁住页面
});

function checkLock() {
    const unlockTime = localStorage.getItem("scl90_unlock_time");
    const modal = document.getElementById("authModal");
    
    // 如果有记录，且在24小时内，就不显示弹窗
    if (unlockTime) {
        const passed = (new Date().getTime() - parseInt(unlockTime)) / (1000 * 60 * 60);
        if (passed < 24) return; 
    }
    // 否则显示弹窗
    modal.classList.add("show");
}

function verifyRedeemCode() {
    const input = document.getElementById("redeemCode");
    const code = input.value.trim();
    
    // 万能后门：输入12020000直接进（你自己测试用）
    if(code === "12020000") { unlock(); return; }

    // 算法验证
    if (code.length === 8 && checkSignature(code)) {
        unlock();
    } else {
        alert("兑换码无效！");
        input.value = "";
        document.querySelector(".auth-card").classList.add("shake");
        setTimeout(()=>document.querySelector(".auth-card").classList.remove("shake"), 500);
    }
}

function checkSignature(code) {
    const randomPart = code.substring(0, 4);
    const signPart = code.substring(4, 8);
    const secret = AUTH_CONFIG.SECRET_KEY;
    
    // 重复生成器的算法
    let str = randomPart + secret;
    let hash = 0;
    for (let i = 0; i < str.length; i++) {
        let char = str.charCodeAt(i);
        hash = ((hash << 5) - hash) + char;
        hash = hash & hash; 
    }
    let calculatedSign = Math.abs(hash).toString();
    while (calculatedSign.length < 4) calculatedSign = "0" + calculatedSign;
    
    // 核心比对：算出来的尾号 == 输入的尾号
    return calculatedSign.substring(calculatedSign.length - 4) === signPart;
}

function unlock() {
    alert("验证成功！24小时内有效。");
    localStorage.setItem("scl90_unlock_time", new Date().getTime());
    document.getElementById("authModal").classList.remove("show");
}
// === 验证系统结束 ===
</script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=PingFang+SC:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
/* === 新增：验证弹窗样式 === */
.modal-overlay {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background-color: rgba(0, 0, 0, 0.4); /* 增加模糊度，让背景看起来像磨砂玻璃 */
    backdrop-filter: blur(5px); z-index: 9999;
    display: flex; justify-content: center; align-items: center;
    visibility: hidden; opacity: 0; transition: all 0.3s;
}
.modal-overlay.show { visibility: visible; opacity: 1; }
.auth-card {
    background: #fff; width: 85%; max-width: 350px;
    padding: 30px; border-radius: 16px; text-align: center;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}
.auth-input {
    width: 100%; padding: 12px; margin: 20px 0;
    font-size: 18px; text-align: center; letter-spacing: 2px;
    border: 2px solid #ddd; border-radius: 8px;
}
.btn-verify {
    width: 100%; padding: 12px; border: none; border-radius: 30px;
    background: linear-gradient(90deg, #34C759, #20993c);
    color: white; font-size: 16px; cursor: pointer; margin-bottom: 10px;
}
.btn-xhs-link {
    display: block; width: 100%; padding: 12px 0;
    color: #ff2442; text-decoration: none; font-size: 14px;
}
.shake { animation: shake 0.5s; }
@keyframes shake { 0%, 100% {transform: translateX(0);} 25% {transform: translateX(-5px);} 75% {transform: translateX(5px);} }
      :root {
        /* 纯正的紫色调色板 */
        --primary-light: #f5f0ff;
        --primary-soft: #e6d6ff;
        --primary-main: #9c27b0;
        --primary-dark: #7b1fa2;
        --primary-deep: #6a1b9a;
        --accent-color: #e91e63;
        --text-primary: #333333;
        --text-secondary: #666666;
        --text-light: #888888;
        --bg-light: #faf5ff;
        --bg-white: #ffffff;
        --border-color: #e1c4e8;
        --shadow-light: rgba(156, 39, 176, 0.1);
        --shadow-medium: rgba(156, 39, 176, 0.2);
        --border-radius: 16px;
        --transition: all 0.3s ease;
    }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Inter', 'PingFang SC', sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--bg-light);
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* 头部样式 */
        header {
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary-main) 100%);
            color: white;
            padding: 22px 0;
            box-shadow: 0 6px 20px var(--shadow-medium);
            position: sticky;
            top: 0;
            z-index: 100;
            /* 优化：增加纯色背景兜底，防止 backdrop-filter 不支持时变透明 */
            background-color: rgba(106, 27, 154, 0.98); 
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 700;
            font-size: 24px;
        }
        
        .logo-text {
            display: flex;
            flex-direction: column;
            line-height: 1.2;
        }
        
        .logo-main {
            font-size: 24px;
            font-weight: 700;
        }
        
        .logo-sub {
            font-size: 14px;
            font-weight: 400;
            opacity: 0.9;
        }
        
        .nav-links {
            display: flex;
            gap: 30px;
        }
        
        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            font-size: 16px;
            transition: var(--transition);
            padding: 8px 0;
            position: relative;
        }
        
        .nav-links a:hover {
            color: var(--primary-soft);
            transform: translateY(-2px);
        }
        
        .nav-links a.active:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: var(--accent-color);
            border-radius: 2px;
        }
        
        /* 主内容区域 */
        main {
            min-height: calc(100vh - 160px);
            padding: 50px 0 80px;
        }
        
        .page {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .page.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* 介绍页样式 */
        .intro-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 40px 0;
        }
        
        .intro-icon {
            font-size: 80px;
            color: var(--primary-main);
            margin-bottom: 30px;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
        
        .intro-title {
            font-size: 44px;
            font-weight: 700;
            color: var(--primary-deep);
            margin-bottom: 20px;
            line-height: 1.2;
            background: linear-gradient(to right, var(--primary-main), var(--primary-deep));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .intro-subtitle {
            font-size: 20px;
            color: var(--text-secondary);
            max-width: 800px;
            margin-bottom: 50px;
            line-height: 1.5;
        }
        
        .intro-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            width: 100%;
            margin-bottom: 60px;
        }
        
        .feature-card {
            background-color: var(--bg-white);
            border-radius: var(--border-radius);
            padding: 35px 30px;
            box-shadow: 0 8px 25px var(--shadow-light);
            transition: var(--transition);
            border: 1px solid var(--border-color);
            text-align: center;
        }
        
        .feature-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px var(--shadow-medium);
        }
        
        .feature-icon {
            font-size: 42px;
            color: var(--primary-main);
            margin-bottom: 25px;
        }
        
        .feature-title {
            font-size: 22px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--primary-dark);
        }
        
        .feature-desc {
            color: var(--text-secondary);
            font-size: 15.5px;
            line-height: 1.6;
        }
        
        .start-button {
            background: linear-gradient(to right, var(--primary-main), var(--primary-dark));
            color: white;
            border: none;
            padding: 20px 50px;
            font-size: 18px;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 8px 25px rgba(138, 112, 214, 0.3);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .start-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 30px rgba(138, 112, 214, 0.4);
            background: linear-gradient(to right, var(--primary-dark), var(--primary-deep));
        }
        
        /* 信息收集页样式 */
        .info-container {
            max-width: 600px;
            margin: 0 auto;
        }
        
        .info-card {
            background-color: var(--bg-white);
            border-radius: var(--border-radius);
            padding: 45px;
            box-shadow: 0 10px 30px var(--shadow-light);
            margin-bottom: 30px;
            border: 1px solid var(--border-color);
        }
        
        .info-title {
            font-size: 30px;
            font-weight: 600;
            color: var(--primary-deep);
            margin-bottom: 30px;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 28px;
        }
        
        .form-label {
            display: block;
            font-size: 16px;
            font-weight: 500;
            margin-bottom: 10px;
            color: var(--text-primary);
        }
        
        .form-input, .form-select {
            width: 100%;
            padding: 16px 18px;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            font-size: 16px;
            font-family: inherit;
            transition: var(--transition);
            background-color: var(--bg-white);
        }
        
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--primary-main);
            box-shadow: 0 0 0 3px rgba(138, 112, 214, 0.1);
        }
        
        .form-hint {
            font-size: 14px;
            color: var(--text-light);
            margin-top: 8px;
        }
        
        .form-row {
            display: flex;
            gap: 20px;
        }
        
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
                gap: 0;
            }
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .info-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
        }
        
        .info-button {
            padding: 16px 32px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .back-button {
            background-color: transparent;
            color: var(--primary-main);
            border-color: var(--primary-main);
        }
        
        .back-button:hover {
            background-color: rgba(138, 112, 214, 0.05);
        }
        
        .continue-button {
            background-color: var(--primary-main);
            color: white;
        }
        
        .continue-button:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px var(--shadow-medium);
        }
        
        /* 测试页样式 */
        .test-container {
            max-width: 900px;
            margin: 0 auto;
        }
        
        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 50px;
            margin-bottom: 40px;
            flex-wrap: wrap;
            gap: 20px;
        }
        
        .progress-container {
            flex-grow: 1;
        }
        
        .progress-bar {
            height: 10px;
            background-color: var(--primary-light);
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-soft), var(--primary-main));
            width: 2%;
            transition: width 0.5s ease;
            border-radius: 5px;
        }
        
        .progress-text {
            font-size: 15px;
            color: var(--text-light);
            display: flex;
            justify-content: space-between;
        }
        
        .question-counter {
            font-weight: 600;
            color: var(--primary-main);
        }
        
        .question-card {
            background-color: var(--bg-white);
            border-radius: var(--border-radius);
            padding: 45px;
            box-shadow: 0 10px 30px var(--shadow-light);
            margin-bottom: 30px;
            border: 1px solid var(--border-color);
            transition: transform 0.2s ease;
        }
        
        .question-title {
            font-size: 24px;
            font-weight: 600;
            color: var(--primary-deep);
            margin-bottom: 35px;
            line-height: 1.4;
        }
        
        .options-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 18px;
        }
        
        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
        }
        
        .option-item {
            padding: 20px 22px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            overflow: hidden;
        }
        
        .option-item:hover {
            border-color: var(--primary-soft);
            background-color: var(--primary-light);
            transform: translateY(-2px);
        }
        
        .option-item.selected {
            border-color: var(--primary-main);
            background-color: rgba(138, 112, 214, 0.1);
            box-shadow: 0 5px 15px rgba(138, 112, 214, 0.1);
        }

        .option-item.selected::after {
            content: "";
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(156, 39, 176, 0.05);
            animation: pulse 0.3s ease;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.5; }
            100% { transform: scale(1.02); opacity: 0; }
        }
        
        .option-marker {
            width: 22px;
            height: 22px;
            border-radius: 50%;
            border: 2px solid var(--primary-soft);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all 0.2s ease;
        }
        
        .option-item.selected .option-marker {
            background-color: var(--primary-main);
            border-color: var(--primary-main);
            transform: scale(1.1);
        }
        
        .option-item.selected .option-marker:after {
            content: '';
            width: 10px;
            height: 10px;
            background-color: white;
            border-radius: 50%;
        }
        
        .option-text {
            font-size: 16.5px;
            color: var(--text-primary);
            line-height: 1.5;
        }
        
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 50px;
        }
        
        .nav-button {
            padding: 16px 34px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition);
            border: 2px solid transparent;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .prev-button {
            background-color: transparent;
            color: var(--primary-main);
            border-color: var(--primary-main);
        }
        
        .prev-button:hover {
            background-color: rgba(138, 112, 214, 0.05);
        }
        
        .next-button {
            background-color: var(--primary-main);
            color: white;
        }
        
        .next-button:hover {
            background-color: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px var(--shadow-medium);
        }
        
        .next-button.disabled {
            background-color: var(--text-light);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            opacity: 0.7;
        }
        
        /* 结果页样式 */
        .result-container {
            max-width: 900px;
            margin: 0 auto;
            background-color: var(--bg-white);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 15px 40px var(--shadow-light);
            border: 1px solid var(--border-color);
        }
        
        .result-header {
            background: linear-gradient(135deg, var(--primary-main) 0%, var(--primary-deep) 100%);
            color: white;
            padding: 50px;
            text-align: center;
        }
        
        .result-title {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 15px;
        }
        
        .result-subtitle {
            font-size: 18px;
            opacity: 0.9;
        }
        
        .result-body {
            padding: 50px;
        }
        
        .user-info-summary {
            display: flex;
            justify-content: center;
            gap: 35px;
            margin-bottom: 45px;
            flex-wrap: wrap;
        }
        
        .user-info-item {
            text-align: center;
            padding: 18px 28px;
            background-color: var(--primary-light);
            border-radius: 12px;
            min-width: 150px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.03);
        }
        
        .user-info-label {
            font-size: 14px;
            color: var(--text-light);
            margin-bottom: 8px;
        }
        
        .user-info-value {
            font-size: 20px;
            font-weight: 600;
            color: var(--primary-dark);
        }
        
        .result-type {
            text-align: center;
            margin-bottom: 50px;
        }
        
        .result-type-icon {
            font-size: 75px;
            color: var(--primary-main);
            margin-bottom: 25px;
        }
        
        .result-type-title {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary-deep);
            margin-bottom: 15px;
        }
        
        .result-type-desc {
            color: var(--text-secondary);
            font-size: 19px;
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.5;
        }

        /* 巴纳姆效应文案样式 */
        .barnum-quote {
            font-size: 18px;
            color: var(--primary-main);
            font-weight: 500;
            margin-top: 15px;
            font-style: italic;
            background-color: rgba(156, 39, 176, 0.05);
            padding: 10px 20px;
            border-radius: 30px;
            display: inline-block;
        }
        
        /* 图表容器样式 (新增) */
        .chart-container {
            max-width: 500px;
            margin: 30px auto 50px;
            position: relative;
        }
        
        .result-details {
            margin-bottom: 50px;
        }
        
        .detail-section {
            margin-bottom: 35px;
        }
        
        .detail-title {
            font-size: 22px;
            font-weight: 600;
            color: var(--primary-dark);
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .detail-content {
            color: var(--text-primary);
            line-height: 1.7;
            font-size: 17px;
        }
        
        .result-traits {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 18px;
            margin-top: 25px;
        }
        
        .trait-item {
            background-color: var(--primary-light);
            padding: 18px;
            border-radius: 10px;
            text-align: center;
            font-weight: 500;
            color: var(--primary-dark);
            border-left: 4px solid var(--primary-main);
            font-size: 16px;
        }
        
        .ideal-partner-profile {
            background: linear-gradient(to right, rgba(138, 112, 214, 0.05), rgba(138, 112, 214, 0.1));
            border-radius: 12px;
            padding: 30px;
            margin-top: 25px;
            border-left: 4px solid var(--accent-color);
        }
        
        .ideal-partner-title {
            font-size: 20px;
            font-weight: 600;
            color: var(--primary-dark);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .ideal-partner-details {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 18px;
        }
        
        .partner-trait {
            background-color: white;
            padding: 15px 18px;
            border-radius: 10px;
            font-size: 15.5px;
            box-shadow: 0 5px 12px rgba(0, 0, 0, 0.05);
        }
        
        .result-actions {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-top: 50px;
            flex-wrap: wrap;
        }
        
        .action-button {
            padding: 18px 35px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 12px;
            text-decoration: none;
        }
        
        .restart-button {
            background-color: transparent;
            color: var(--primary-main);
            border: 2px solid var(--primary-main);
        }
        
        .restart-button:hover {
            background-color: rgba(138, 112, 214, 0.05);
            transform: translateY(-2px);
        }
        
        .share-button {
            background-color: var(--accent-color);
            color: white;
            border: 2px solid var(--accent-color);
        }
        
        .share-button:hover {
            background-color: #ff6ba3;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 126, 179, 0.3);
        }
        
        /* 页脚样式 - 简化版 */
        footer {
            background: linear-gradient(135deg, var(--primary-deep) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 30px 0;
            text-align: center;
        }
        
        .copyright {
            font-size: 15px;
            opacity: 0.8;
            line-height: 1.6;
        }
        
        /* 响应式调整 */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 20px;
            }
            
            .nav-links {
                width: 100%;
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .intro-title {
                font-size: 34px;
            }
            
            .intro-subtitle {
                font-size: 18px;
                padding: 0 15px;
            }
            
            .question-card {
                padding: 30px 25px;
            }
            
            .question-title {
                font-size: 22px;
            }
            
            .result-header {
                padding: 35px 25px;
            }
            
            .result-title {
                font-size: 28px;
            }
            
            .result-body {
                padding: 35px 25px;
            }
            
            .user-info-summary {
                gap: 20px;
            }
            
            .user-info-item {
                min-width: 130px;
                padding: 15px 20px;
            }
            
            .info-card {
                padding: 30px 25px;
            }
             .test-header {
                margin-top: 30px;
             }
        }
        
        @media (max-width: 480px) {
            .logo-main {
                font-size: 22px;
            }
            
            .logo-sub {
                font-size: 12px;
            }
            
            .nav-links {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
            
            .intro-title {
                font-size: 28px;
            }
            
            .navigation-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .nav-button {
                justify-content: center;
                width: 100%;
            }
            
            .info-buttons {
                flex-direction: column;
                gap: 15px;
            }
            
            .info-button {
                justify-content: center;
                width: 100%;
            }
            
            .result-actions {
                flex-direction: column;
            }
            
            .action-button {
                justify-content: center;
                width: 100%;
            }
           .test-header {
               margin-top: 25px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">
                <div class="logo-text">
                    <div class="logo-main">恋爱画像测评表</div>
                    <div class="logo-sub">灵魂伴侣测试</div>
                </div>
            </div>
            <nav class="nav-links">
                <a href="#" class="active" data-page="intro">首页</a>
                <a href="#" data-page="info">开始测试</a>
                <a href="#" data-page="test">测试中</a>
                <a href="#" data-page="result">查看结果</a>
            </nav>
        </div>
    </header>
    
    <main class="container">
        <section id="intro" class="page active">
            <div class="intro-container">
                <div class="intro-icon">
                    <i class="fas fa-heart-circle-check"></i>
                </div>
                <h1 class="intro-title">恋爱画像测评表</h1>
                <p class="intro-subtitle">
                    通过50道精心设计的题目，探索你的爱情观、恋爱风格和情感需求。<br>
                    基于心理学理论和恋爱类型学，为你提供个性化的恋爱人格分析。
                </p>
                
                <div class="intro-features">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-clipboard-check"></i>
                        </div>
                        <h3 class="feature-title">50道深度题目</h3>
                        <p class="feature-desc">涵盖爱情态度、沟通方式、冲突处理、价值观等多个维度，全面分析你的恋爱风格。</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-chart-pie"></i>
                        </div>
                        <h3 class="feature-title">个性化分析报告</h3>
                        <p class="feature-desc">基于你的选择生成详细报告，包含恋爱类型、优势、潜在挑战以及适配建议。</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-user-friends"></i>
                        </div>
                        <h3 class="feature-title">科学恋爱理论</h3>
                        <p class="feature-desc">融合依恋理论、爱情三元论等心理学研究，提供有科学依据的分析和建议。</p>
                    </div>
                </div>
                
                <button id="start-test" class="start-button">
                    <i class="fas fa-play-circle"></i>
                    开始我的恋爱画像测试
                </button>
            </div>
        </section>
        
        <section id="info" class="page">
            <div class="info-container">
                <div class="info-card">
                    <h2 class="info-title">请先告诉我们一些基本信息</h2>
                    <p style="text-align: center; margin-bottom: 30px; color: var(--text-secondary);">这些信息将帮助我们为您提供更精准的恋爱画像分析</p>
                    
                    <form id="user-info-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="birthdate">出生日期</label>
                                <input type="date" id="birthdate" class="form-input" required>
                                <div class="form-hint">我们将根据您的出生日期计算年龄和星座</div>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="gender">性别</label>
                                <select id="gender" class="form-select" required>
                                    <option value="">请选择</option>
                                    <option value="female">女性</option>
                                    <option value="male">男性</option>
                                    <option value="other">其他/不愿透露</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="relationship-status">目前恋爱状态</label>
                            <select id="relationship-status" class="form-select" required>
                                <option value="">请选择</option>
                                <option value="single">单身，正在寻找伴侣</option>
                                <option value="single_no_looking">单身，但不急于恋爱</option>
                                <option value="dating">正在约会/暧昧中</option>
                                <option value="relationship">恋爱中</option>
                                <option value="engaged">已订婚</option>
                                <option value="married">已婚</option>
                                <option value="separated">分居/冷静期</option>
                                <option value="divorced">离异</option>
                                <option value="widowed">丧偶</option>
                            </select>
                            <div class="form-hint">您的恋爱状态将帮助我们调整分析侧重点</div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="previous-experience">过往恋爱经历</label>
                            <select id="previous-experience" class="form-select">
                                <option value="">请选择（可选）</option>
                                <option value="none">无恋爱经历</option>
                                <option value="little">较少（1-2次）</option>
                                <option value="some">一般（3-5次）</option>
                                <option value="much">较多（5次以上）</option>
                                <option value="complex">比较复杂，难以概括</option>
                            </select>
                            <div class="form-hint">帮助我们了解您的恋爱经验背景</div>
                        </div>
                        
                        <div class="info-buttons">
                            <button type="button" id="back-to-intro" class="info-button back-button">
                                <i class="fas fa-arrow-left"></i>
                                返回首页
                            </button>
                            <button type="submit" class="info-button continue-button">
                                开始答题
                                <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </section>
        
        <section id="test" class="page">
            <div class="test-container">
                <div class="test-header">
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progress-fill"></div>
                        </div>
                        <div class="progress-text">
                            <span>恋爱画像测试</span>
                            <span class="question-counter" id="question-counter">1/50</span>
                        </div>
                    </div>
                </div>
                
                <div class="question-card">
                    <h2 class="question-title" id="question-text">当开始一段新关系时，你更倾向于：</h2>
                    
                    <div class="options-container" id="options-container">
                        </div>
                    
                    <div class="navigation-buttons">
                        <button id="prev-btn" class="nav-button prev-button">
                            <i class="fas fa-arrow-left"></i>
                            上一题
                        </button>
                        <button id="next-btn" class="nav-button next-button">
                            下一题
                            <i class="fas fa-arrow-right"></i>
                        </button>
                        <button id="submit-btn" class="nav-button next-button" style="display: none;">
                            <i class="fas fa-check-circle"></i>
                            查看我的结果
                        </button>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="result" class="page">
            <div class="result-container">
                <div class="result-header">
                    <h1 class="result-title">你的恋爱画像分析报告</h1>
                    <p class="result-subtitle">基于50道题目的深度分析，发现你的独特爱情人格</p>
                </div>
                
                <div class="result-body">
                    <div class="user-info-summary" id="user-info-summary">
                        </div>
                    
                    <div class="result-type">
                        <div class="result-type-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <h2 class="result-type-title" id="result-type-title">浪漫探索者</h2>
                        <div id="barnum-quote" class="barnum-quote"></div>
                        <p class="result-type-desc" id="result-type-desc" style="margin-top: 20px;">你对爱情充满热情和好奇心，喜欢探索情感深度和浪漫体验</p>
                    </div>
                    
                    <div class="chart-container">
                        <canvas id="radarChart"></canvas>
                    </div>
                    
                    <div class="result-details">
                        <div class="detail-section">
                            <h3 class="detail-title">
                                <i class="fas fa-heart"></i>
                                你的恋爱人格类型
                            </h3>
                            <div class="detail-content" id="personality-description">
                                </div>
                        </div>
                        
                        <div class="detail-section">
                            <h3 class="detail-title">
                                <i class="fas fa-award"></i>
                                你的核心特质
                            </h3>
                            <div class="result-traits" id="traits-container">
                                </div>
                        </div>
                        
                        <div class="detail-section">
                            <h3 class="detail-title">
                                <i class="fas fa-thumbs-up"></i>
                                你的恋爱优势
                            </h3>
                            <div class="detail-content" id="strengths-description">
                                </div>
                        </div>
                        
                        <div class="detail-section">
                            <h3 class="detail-title">
                                <i class="fas fa-lightbulb"></i>
                                关系发展建议
                            </h3>
                            <div class="detail-content" id="advice-description">
                                </div>
                        </div>
                        
                        <div class="detail-section">
                            <h3 class="detail-title">
                                <i class="fas fa-user-friends"></i>
                                最佳匹配类型
                            </h3>
                            <div class="detail-content">
                                <div id="matching-description">
                                   </div>
                                
                                <div class="ideal-partner-profile">
                                    <div class="ideal-partner-title">
                                        <i class="fas fa-heart-circle-check"></i>
                                        根据您的个人信息，为您推荐的理想伴侣画像
                                    </div>
                                    <div class="ideal-partner-details" id="ideal-partner-details">
                                        </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="result-actions">
                        <button id="restart-btn" class="action-button restart-button">
                            <i class="fas fa-redo"></i>
                            重新测试
                        </button>
                        <a href="#" class="action-button share-button">
                            <i class="fas fa-share-alt"></i>
                            分享我的结果
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <footer>
        <div class="container">
            <div class="copyright">
                <p>© 2026 恋爱画像测评表 | 灵魂伴侣测试</p>
                <p>基于心理学理论的个性化恋爱人格分析工具 | 本测试结果仅供参考，不能替代专业心理咨询</p>
            </div>
        </div>
    </footer>
    
    <script>
        // 全局图表实例，用于销毁重建
        let radarChartInstance = null;

        // 星座计算函数
        function calculateZodiac(birthdate) {
            const date = new Date(birthdate);
            const month = date.getMonth() + 1;
            const day = date.getDate();
            
            if ((month === 1 && day >= 20) || (month === 2 && day <= 18)) return "水瓶座";
            if ((month === 2 && day >= 19) || (month === 3 && day <= 20)) return "双鱼座";
            if ((month === 3 && day >= 21) || (month === 4 && day <= 19)) return "白羊座";
            if ((month === 4 && day >= 20) || (month === 5 && day <= 20)) return "金牛座";
            if ((month === 5 && day >= 21) || (month === 6 && day <= 21)) return "双子座";
            if ((month === 6 && day >= 22) || (month === 7 && day <= 22)) return "巨蟹座";
            if ((month === 7 && day >= 23) || (month === 8 && day <= 22)) return "狮子座";
            if ((month === 8 && day >= 23) || (month === 9 && day <= 22)) return "处女座";
            if ((month === 9 && day >= 23) || (month === 10 && day <= 23)) return "天秤座";
            if ((month === 10 && day >= 24) || (month === 11 && day <= 22)) return "天蝎座";
            if ((month === 11 && day >= 23) || (month === 12 && day <= 21)) return "射手座";
            if ((month === 12 && day >= 22) || (month === 1 && day <= 19)) return "摩羯座";
            return "未知";
        }
        
        // 年龄计算函数
        function calculateAge(birthdate) {
            const today = new Date();
            const birthDate = new Date(birthdate);
            let age = today.getFullYear() - birthDate.getFullYear();
            const monthDiff = today.getMonth() - birthDate.getMonth();
            
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                age--;
            }
            return age;
        }
        
        // 50道完整题目
const questions = [
    {
        id: 1,
        text: "当开始一段新关系时，你更倾向于：",
        options: [
            "慢慢了解对方，建立深厚的情感连接",
            "享受当下的浪漫和激情",
            "理性分析双方是否合适",
            "保持独立，不急于确定关系"
        ]
    },
    {
        id: 2,
        text: "在恋爱中，你认为最重要的是：",
        options: [
            "彼此的理解和信任",
            "持续的浪漫和新鲜感",
            "共同的价值观和目标",
            "个人的空间和自由"
        ]
    },
    {
        id: 3,
        text: "当与伴侣发生冲突时，你通常会：",
        options: [
            "坦诚沟通，寻找解决方案",
            "情绪化表达，希望对方理解你的感受",
            "冷静分析问题，理性讨论",
            "暂时回避，等情绪平复再谈"
        ]
    },
    {
        id: 4,
        text: "你理想中的约会方式是：",
        options: [
            "深入的心灵对话，分享彼此想法",
            "浪漫的惊喜安排，创造特别回忆",
            "一起参与有趣的活动或学习新事物",
            "轻松的相处，不需要特别安排"
        ]
    },
    {
        id: 5,
        text: "在表达爱意时，你更偏向于：",
        options: [
            "通过行动和日常关怀展现",
            "用浪漫的语言和礼物表达",
            "通过共同规划和未来承诺",
            "给予彼此足够的信任和自由"
        ]
    },
    {
        id: 6,
        text: "关于未来的伴侣，你更看重：",
        options: [
            "情感上的默契和共鸣",
            "浪漫感觉和化学反应",
            "责任感和稳定性",
            "独立性和个人空间"
        ]
    },
    {
        id: 7,
        text: "在恋爱关系中，你如何处理分歧：",
        options: [
            "积极沟通，寻求共识",
            "表达情感，希望对方妥协",
            "理性分析，找到合理方案",
            "各自冷静，避免正面冲突"
        ]
    },
    {
        id: 8,
        text: "你如何看待恋爱中的承诺：",
        options: [
            "承诺是感情发展的自然结果",
            "承诺让关系更浪漫和特别",
            "承诺需要基于现实的考量",
            "承诺不应束缚个人自由"
        ]
    },
    {
        id: 9,
        text: "当感到不安或嫉妒时，你会：",
        options: [
            "直接与伴侣沟通你的感受",
            "情绪波动，可能表现出生气或冷淡",
            "分析原因，判断是否合理",
            "自己消化情绪，不愿表现出来"
        ]
    },
    {
        id: 10,
        text: "你理想中的爱情更像：",
        options: [
            "深度的精神连接和相互理解",
            "激情四射的浪漫冒险",
            "稳定可靠的合作伙伴关系",
            "自由独立的灵魂共鸣"
        ]
    },
    {
        id: 11,
        text: "关于个人空间和伴侣时间，你认为：",
        options: [
            "需要平衡，既有共同时间也有个人空间",
            "希望尽可能多的时间在一起",
            "应该有计划地安排时间和空间",
            "个人空间非常重要，需要充分保障"
        ]
    },
    {
        id: 12,
        text: "当伴侣需要支持时，你通常会：",
        options: [
            "提供情感安慰和理解",
            "用浪漫方式让对方开心",
            "提供实际帮助和建议",
            "给予空间，让对方自己处理"
        ]
    },
    {
        id: 13,
        text: "你如何看待恋爱中的惊喜和仪式感：",
        options: [
            "喜欢偶尔的惊喜，但不过度强调",
            "非常重视，认为这是浪漫的必要部分",
            "更看重实际的关怀而非形式",
            "可有可无，自然相处更重要"
        ]
    },
    {
        id: 14,
        text: "在恋爱关系中，你的独立性如何：",
        options: [
            "保持一定独立性，但愿意为关系调整",
            "愿意为爱情投入大量时间和精力",
            "明确划分个人和关系界限",
            "非常重视独立性，不愿过多妥协"
        ]
    },
    {
        id: 15,
        text: "你如何表达对伴侣的欣赏：",
        options: [
            "通过具体行动和细节关怀",
            "用浪漫的语言和创意表达",
            "通过支持和鼓励对方成长",
            "给予信任和自由就是最好的欣赏"
        ]
    },
    {
        id: 16,
        text: "关于未来规划，你希望伴侣：",
        options: [
            "有相似的价值观和生活目标",
            "能一起创造浪漫的未来想象",
            "有实际可行的规划和责任感",
            "尊重彼此的个人发展路径"
        ]
    },
    {
        id: 17,
        text: "当恋爱关系遇到困难时，你的态度是：",
        options: [
            "积极面对，共同寻找解决方案",
            "情绪起伏，需要更多情感支持",
            "理性分析，制定改善计划",
            "可能考虑退出，保护自己"
        ]
    },
    {
        id: 18,
        text: "你如何看待恋爱中的物质因素：",
        options: [
            "重要但不是决定性因素",
            "浪漫和情感比物质更重要",
            "需要有基本的经济保障",
            "物质独立是关系平等的基础"
        ]
    },
    {
        id: 19,
        text: "在亲密关系中，你的情感表达方式是：",
        options: [
            "适度开放，逐步建立信任",
            "热情直接，乐于表达情感",
            "谨慎理性，不轻易表露情感",
            "相对内敛，需要时间才能打开"
        ]
    },
    {
        id: 20,
        text: "你如何处理恋爱中的不安全感：",
        options: [
            "与伴侣沟通，寻求 reassurance",
            "可能需要反复确认对方的爱意",
            "自我反思，判断是否合理",
            "尽量自己处理，不愿依赖他人"
        ]
    },
    {
        id: 21,
        text: "关于伴侣的朋友圈，你认为：",
        options: [
            "应该有一定交集，但不需要完全融合",
            "希望融入彼此的社交圈",
            "保持适当距离，尊重彼此社交",
            "各自的社交圈应该基本独立"
        ]
    },
    {
        id: 22,
        text: "你如何看待恋爱中的小摩擦：",
        options: [
            "正常现象，通过沟通解决",
            "可能引发情绪波动，需要安慰",
            "应该理性处理，避免情绪化",
            "尽量回避，保持和谐"
        ]
    },
    {
        id: 23,
        text: "在恋爱中，你更看重对方的：",
        options: [
            "人品和价值观",
            "浪漫感觉和吸引力",
            "责任感和可靠性",
            "独立性和个人魅力"
        ]
    },
    {
        id: 24,
        text: "你如何维护恋爱关系的新鲜感：",
        options: [
            "共同尝试新事物，深化了解",
            "创造浪漫惊喜，保持激情",
            "建立稳定健康的相处模式",
            "保持各自空间，自然发展"
        ]
    },
    {
        id: 25,
        text: "关于爱情和事业/学业，你的态度是：",
        options: [
            "寻求平衡，两者都重要",
            "愿意为爱情投入更多时间",
            "事业/学业优先，爱情次之",
            "两者都应该独立发展"
        ]
    },
    {
        id: 26,
        text: "当伴侣的意见与你不同时，你会：",
        options: [
            "尊重差异，寻求共同点",
            "可能感到受伤，需要情感支持",
            "理性讨论，分析各自观点",
            "接受差异，各自保留意见"
        ]
    },
    {
        id: 27,
        text: "你如何看待恋爱中的长期承诺（如婚姻）：",
        options: [
            "是感情发展的自然阶段",
            "是浪漫关系的终极体现",
            "需要慎重考虑的现实决定",
            "不一定需要，关系质量更重要"
        ]
    },
    {
        id: 28,
        text: "在恋爱中，你的情感需求主要是：",
        options: [
            "深度的理解和情感共鸣",
            "持续的浪漫和关注",
            "稳定可靠的支持",
            "自由和独立的空间"
        ]
    },
    {
        id: 29,
        text: "你如何对待伴侣的过去：",
        options: [
            "理解并接受，关注现在和未来",
            "可能感到嫉妒或不安",
            "理性看待，不影响当前关系",
            "不太在意，每个人都有过去"
        ]
    },
    {
        id: 30,
        text: "关于恋爱中的亲密程度，你认为：",
        options: [
            "应该随关系发展自然加深",
            "亲密是浪漫爱情的重要部分",
            "需要时间建立充分信任",
            "保持适当距离更健康"
        ]
    },
    {
        id: 31,
        text: "当伴侣成功或取得成就时，你的反应是：",
        options: [
            "真诚为对方高兴，共同庆祝",
            "用浪漫方式表达赞美和骄傲",
            "理性肯定，分析成功因素",
            "给予空间，让对方享受成就"
        ]
    },
    {
        id: 32,
        text: "你如何看待恋爱中的妥协和牺牲：",
        options: [
            "适度的妥协是关系必要的",
            "愿意为爱情做出较大牺牲",
            "应该基于理性判断和平衡",
            "尽可能减少妥协，保持自我"
        ]
    },
    {
        id: 33,
        text: "在恋爱关系中，你的沟通风格是：",
        options: [
            "开放坦诚，鼓励深度交流",
            "情感丰富，表达直接",
            "理性清晰，注重逻辑",
            "简洁含蓄，避免过度表达"
        ]
    },
    {
        id: 34,
        text: "你如何处理恋爱中的期望和现实差距：",
        options: [
            "调整期望，接受现实的不完美",
            "可能感到失望，需要情感支持",
            "理性分析，寻找改善方法",
            "降低期望，避免失望"
        ]
    },
    {
        id: 35,
        text: "关于恋爱中的忠诚，你认为：",
        options: [
            "忠诚是关系的基础和底线",
            "忠诚让爱情更浪漫和特别",
            "忠诚是理性选择的责任",
            "忠诚重要，但也需要信任自由"
        ]
    },
    {
        id: 36,
        text: "当恋爱激情减退时，你会：",
        options: [
            "努力深化情感连接",
            "创造新的浪漫体验",
            "建立更稳定的相处模式",
            "接受变化，顺其自然"
        ]
    },
    {
        id: 37,
        text: "你如何看待恋爱中的财务问题：",
        options: [
            "应该透明沟通，共同规划",
            "浪漫比金钱更重要",
            "需要明确的财务责任划分",
            "各自经济独立最好"
        ]
    },
    {
        id: 38,
        text: "在恋爱中，你需要的个人空间是：",
        options: [
            "适度的，用于个人成长和反思",
            "较少的，更喜欢与伴侣共处",
            "明确的，用于工作和个人事务",
            "较多的，保持独立性和自由度"
        ]
    },
    {
        id: 39,
        text: "你如何应对恋爱中的不确定性：",
        options: [
            "与伴侣沟通，共同面对",
            "可能感到焦虑，需要 reassurance",
            "理性分析，制定应对计划",
            "接受不确定性是生活一部分"
        ]
    },
    {
        id: 40,
        text: "关于恋爱中的互相依赖，你认为：",
        options: [
            "健康的关系需要适度互相依赖",
            "深爱就会自然产生强烈依赖",
            "应该保持相对独立，减少依赖",
            "各自独立，偶尔相互支持"
        ]
    },
    {
        id: 41,
        text: "你如何看待伴侣的缺点和不足：",
        options: [
            "接受不完美，关注整体",
            "可能影响浪漫感觉",
            "理性评估，判断是否可接受",
            "每个人都有自己的特点"
        ]
    },
    {
        id: 42,
        text: "在恋爱关系中，你的嫉妒心程度：",
        options: [
            "适度，会在合理范围内",
            "较强，容易感到不安",
            "较低，更信任理性判断",
            "很低，尊重彼此自由"
        ]
    },
    {
        id: 43,
        text: "你如何定义成功的恋爱关系：",
        options: [
            "深度理解、共同成长的关系",
            "充满激情和浪漫的关系",
            "稳定和谐、互相支持的关系",
            "自由独立、互相尊重的关系"
        ]
    },
    {
        id: 44,
        text: "关于恋爱中的权力平衡，你认为：",
        options: [
            "应该是平等互惠的关系",
            "爱情不应该计较权力",
            "应该有明确的责任分工",
            "各自独立，无需权力平衡"
        ]
    },
    {
        id: 45,
        text: "当恋爱关系变得平淡时，你会：",
        options: [
            "寻找新的共同兴趣和话题",
            "努力创造浪漫惊喜",
            "享受稳定平静的相处",
            "接受平淡是关系的自然阶段"
        ]
    },
    {
        id: 46,
        text: "你如何看待恋爱中的性吸引力：",
        options: [
            "是关系的重要组成部分",
            "是浪漫爱情的核心元素",
            "重要但次于情感连接",
            "是个人自由的表达方式"
        ]
    },
    {
        id: 47,
        text: "关于恋爱中的未来规划，你的态度是：",
        options: [
            "愿意共同讨论和规划未来",
            "更关注当下的浪漫感受",
            "需要明确的未来计划和目标",
            "未来应该自然发展，不必强求"
        ]
    },
    {
        id: 48,
        text: "你如何处理恋爱中的失望情绪：",
        options: [
            "与伴侣沟通，寻找解决方案",
            "可能情绪低落，需要安慰",
            "理性分析原因，调整期望",
            "自己消化，不表现出来"
        ]
    },
    {
        id: 49,
        text: "关于恋爱中的自我表达，你认为：",
        options: [
            "应该能够真实表达自我",
            "愿意为爱情调整一些自我",
            "保持核心自我，适度调整",
            "自我表达比关系更重要"
        ]
    },
    {
        id: 50,
        text: "总体而言，你的恋爱观更接近：",
        options: [
            "追求深度情感连接的灵魂伴侣",
            "享受浪漫激情的爱情冒险家",
            "重视稳定可靠的伴侣关系",
            "保持独立自由的现代恋爱者"
        ]
    }
];
        
        // 结果类型数据（优化版：加入巴纳姆效应标题和五维数据）
        const resultTypes = {
            "romanticExplorer": {
                // 优化文案
                title: "稀有的 浪漫探索者 (人群中仅占15%)",
                barnumQuote: "你表面高冷，内心却住着一只渴望拥抱的小猫。",
                description: "你对爱情充满热情和好奇心，喜欢探索情感深度和浪漫体验",
                // 五维属性：浪漫, 忠诚, 独立, 激情, 沟通
                chartData: [90, 70, 60, 80, 85],
                personality: "你是一个充满激情和好奇心的浪漫探索者。在爱情中，你追求深度连接和精神共鸣，不仅仅满足于表面的浪漫。你愿意投入时间和精力去了解伴侣的内心世界，同时也期待对方能够理解你的情感需求。你对爱情抱有理想化的期待，但同时也具备现实的理解，能够在理想与现实之间找到平衡。",
                traits: ["情感深刻", "富有好奇心", "浪漫主义", "开放心态", "适应性强"],
                strengths: "1. <strong>情感深度</strong>：你能够建立深厚的情感连接，不满足于肤浅的关系。<br>2. <strong>沟通能力</strong>：你擅长表达自己的感受，也愿意倾听伴侣的心声。<br>3. <strong>浪漫创造力</strong>：你善于创造难忘的浪漫时刻，让关系保持新鲜感。<br>4. <strong>适应能力</strong>：你能够根据关系发展阶段调整自己的期望和行为。<br>5. <strong>忠诚度</strong>：一旦承诺，你会全心全意投入，是可靠和忠诚的伴侣。",
                advice: "1. <strong>平衡理想与现实</strong>：保持对爱情的美好期待，同时接纳关系中的不完美。<br>2. <strong>给予空间</strong>：即使渴望深度连接，也要尊重伴侣的个人空间和独立性。<br>3. <strong>管理期望</strong>：明确表达你的需求和期望，避免因误解而产生失望。<br>4. <strong>自我关爱</strong>：在投入关系的同时，不要忽视自己的个人成长和需求。<br>5. <strong>冲突处理</strong>：学习建设性的冲突解决方式，将分歧转化为深化理解的机会。",
                matching: "与你最契合的伴侣类型是<strong>稳定支持者</strong>或<strong>情感共鸣者</strong>。他们能够欣赏你的浪漫情怀，同时提供稳定的情感支持。他们理解你对深度连接的需求，并且愿意与你一起探索情感世界。最重要的是，他们尊重你的独立性，同时在你需要时给予坚定的支持。"
            },
            "stablePartner": {
                title: "宝藏级 稳定伴侣 (最值得嫁/娶榜首)",
                barnumQuote: "你总是默默扛下所有，懂你的人会心疼你的坚强。",
                description: "你重视关系的稳定性和可靠性，追求长久而坚实的伴侣关系",
                // 五维属性：浪漫, 忠诚, 独立, 激情, 沟通
                chartData: [40, 95, 70, 50, 80],
                personality: "你是一个务实而可靠的稳定伴侣型。在爱情中，你重视承诺、责任和长期规划，寻求能够共同成长的伴侣关系。你不追求短暂的激情，而是希望建立深厚、持久的情感连接。你的爱情观成熟而理性，能够在浪漫与现实之间找到平衡点。",
                traits: ["可靠稳定", "责任心强", "务实理性", "忠诚专一", "善于规划"],
                strengths: "1. <strong>可靠性</strong>：你是伴侣可以信赖的坚实后盾。<br>2. <strong>责任感</strong>：你认真对待关系中的承诺和义务。<br>3. <strong>理性决策</strong>：你能够在感情中保持清醒的头脑，做出明智选择。<br>4. <strong>长期视角</strong>：你关注关系的长期发展，不局限于眼前感受。<br>5. <strong>稳定情绪</strong>：你的情绪相对稳定，能为关系提供安全感。",
                advice: "1. <strong>增加浪漫元素</strong>：在稳定基础上适当增加浪漫惊喜。<br>2. <strong>表达情感</strong>：学会更直接地表达爱意和情感需求。<br>3. <strong>灵活应变</strong>：在坚持原则的同时保持一定灵活性。<br>4. <strong>接受不确定性</strong>：学会接受关系中的一些不确定性。<br>5. <strong>平衡付出</strong>：确保关系中的付出是相互的，避免单方面承担过多责任。",
                matching: "与你最契合的伴侣类型是<strong>情感共鸣者</strong>或<strong>浪漫探索者</strong>。他们能够为关系带来情感深度和浪漫气息，同时欣赏你的稳定和可靠。他们理解你对长期承诺的重视，并且愿意与你一起规划未来。"
            },
            "independentSoul": {
                title: "高阶版 独立灵魂 (人间清醒)",
                barnumQuote: "你像风一样自由，不依附谁，却自带光芒。",
                description: "你珍视个人自由和独立性，在恋爱中寻求平等自主的关系模式",
                // 五维属性：浪漫, 忠诚, 独立, 激情, 沟通
                chartData: [50, 60, 95, 60, 70],
                personality: "你是一个珍视个人空间和自由意志的独立灵魂型。在爱情中，你追求平等、尊重和相互独立的关系模式，不希望爱情成为束缚个人成长的枷锁。你欣赏那些能够理解并尊重你独立性的人，同时你也愿意给予伴侣同样的自由和空间。你的爱情观现代而开放，注重关系的质量而非形式。",
                traits: ["独立自主", "珍视自由", "平等意识", "自我充实", "界限清晰"],
                strengths: "1. <strong>独立性</strong>：你能够保持自我，不因关系而迷失。<br>2. <strong>平等观念</strong>：你追求关系中的真正平等和相互尊重。<br>3. <strong>个人成长</strong>：你持续关注自我发展和充实。<br>4. <strong>清晰界限</strong>：你能够建立和维护健康的个人界限。<br>5. <strong>低依赖性</strong>：你的情感健康不过度依赖他人。",
                advice: "1. <strong>适度依赖</strong>：允许自己在关系中适度依赖和脆弱。<br>2. <strong>深度连接</strong>：尝试建立更深层次的情感连接。<br>3. <strong>表达需求</strong>：学习更直接地表达情感需求和期望。<br>4. <strong>平衡独立与亲密</strong>：找到独立性与亲密感的平衡点。<br>5. <strong>接受帮助</strong>：学会接受伴侣的帮助和支持，不视为对独立的威胁。",
                matching: "与你最契合的伴侣类型是<strong>自由共鸣者</strong>或<strong>理性思考者</strong>。他们同样珍视个人空间和独立性，能够理解并尊重你的自由需求。他们不会试图控制或改变你，而是欣赏你的自主性和独特个性。"
            },
            "passionateAdventurer": {
                title: "限定款 激情冒险家 (多巴胺制造机)",
                barnumQuote: "和你谈恋爱像坐过山车，虽然惊险但让人上瘾。",
                description: "你追求爱情的激情和新鲜感，享受恋爱过程中的刺激与惊喜",
                // 五维属性：浪漫, 忠诚, 独立, 激情, 沟通
                chartData: [80, 50, 70, 95, 75],
                personality: "你是一个充满活力和冒险精神的激情冒险家。在爱情中，你追求刺激、新鲜感和强烈的情感体验，不喜欢平淡乏味的关系模式。你享受恋爱初期的神秘感和探索过程，善于创造令人难忘的浪漫时刻。你的爱情观充满活力，注重当下的感受和体验。",
                traits: ["充满激情", "热爱冒险", "创意无限", "享受当下", "善于表达"],
                strengths: "1. <strong>热情活力</strong>：你能为关系带来无限活力和激情。<br>2. <strong>创意浪漫</strong>：你善于创造新鲜有趣的恋爱体验。<br>3. <strong>情感表达</strong>：你能够直接而热烈地表达爱意。<br>4. <strong>适应变化</strong>：你能够灵活应对关系中的变化和挑战。<br>5. <strong>享受当下</strong>：你懂得珍惜和享受恋爱中的每一刻。",
                advice: "1. <strong>培养耐心</strong>：学习在激情之外培养长期关系的耐心。<br>2. <strong>深度连接</strong>：尝试建立超越表面激情的深度情感连接。<br>3. <strong>稳定基础</strong>：在激情之上建立稳定的关系基础。<br>4. <strong>管理期望</strong>：调整对永恒激情的期待，接受关系的自然变化。<br>5. <strong>平衡冒险与安全</strong>：在追求新鲜感的同时，也重视关系的安全感。",
                matching: "与你最契合的伴侣类型是<strong>浪漫探索者</strong>或<strong>创意伙伴</strong>。他们能够匹配你的热情和活力，欣赏你的冒险精神，并且愿意与你一起探索爱情的各种可能性。"
            }
        };
        
        // 生成理想伴侣画像 (保留原逻辑)
        function generateIdealPartnerProfile(userInfo, resultType) {
            const profiles = {
                "romanticExplorer": [
                    "情绪稳定，能提供安全感",
                    "善于深度沟通和倾听",
                    "尊重个人空间和独立性",
                    "有相似的生活价值观",
                    "年龄差距在5岁以内",
                    "懂得创造小浪漫",
                    "能够理解情感需求"
                ],
                "stablePartner": [
                    "情感表达直接而真诚",
                    "有责任感和上进心",
                    "情绪成熟，处理冲突理性",
                    "重视家庭和长期承诺",
                    "年龄相近或稍长",
                    "生活目标一致",
                    "能够提供情感支持"
                ],
                "independentSoul": [
                    "同样重视个人空间",
                    "有独立的事业和兴趣",
                    "尊重边界和自由",
                    "情感成熟不依赖",
                    "年龄不限，思想成熟",
                    "支持个人成长",
                    "关系观念现代开放"
                ],
                "passionateAdventurer": [
                    "富有活力和热情",
                    "愿意尝试新事物",
                    "情感表达直接热烈",
                    "欣赏创意和 spontaneity",
                    "年龄相近，精力匹配",
                    "能够保持关系新鲜感",
                    "享受当下不惧变化"
                ]
            };
            
            let ageBasedTraits = [];
            if (userInfo.age < 25) {
                ageBasedTraits = ["有成长潜力", "开放的学习心态", "生活观念未完全定型"];
            } else if (userInfo.age < 35) {
                ageBasedTraits = ["有一定人生经历", "明确的生活目标", "情感相对成熟"];
            } else {
                ageBasedTraits = ["情感非常成熟", "生活经验丰富", "清晰自我认知"];
            }
            
            let statusBasedTraits = [];
            if (userInfo.relationshipStatus.includes("single")) {
                statusBasedTraits = ["对关系态度认真", "准备好进入稳定关系", "有清晰的择偶标准"];
            } else if (userInfo.relationshipStatus.includes("dating") || userInfo.relationshipStatus.includes("relationship")) {
                statusBasedTraits = ["能够处理现有关系挑战", "重视关系质量", "愿意为关系成长努力"];
            } else if (userInfo.relationshipStatus.includes("married") || userInfo.relationshipStatus.includes("engaged")) {
                statusBasedTraits = ["重视婚姻承诺", "善于经营长期关系", "家庭观念强"];
            }
            
            return [...profiles[resultType], ...ageBasedTraits, ...statusBasedTraits];
        }
        
        // 计算恋爱类型 (保留原逻辑)
        function calculateResultType(answers, userInfo) {
            let typeScores = {
                "romanticExplorer": 0,
                "passionateAdventurer": 0,
                "stablePartner": 0,
                "independentSoul": 0
            };
            
            answers.forEach((answer) => {
                if (answer === 0) typeScores.romanticExplorer++;
                else if (answer === 1) typeScores.passionateAdventurer++;
                else if (answer === 2) typeScores.stablePartner++;
                else if (answer === 3) typeScores.independentSoul++;
            });
            
            let maxScore = -1;
            let resultType = "romanticExplorer";
            
            for (const [type, score] of Object.entries(typeScores)) {
                if (score > maxScore) {
                    maxScore = score;
                    resultType = type;
                }
            }
            
            if (userInfo.age >= 30 && typeScores.stablePartner > 0) {
                 if (maxScore - typeScores.stablePartner < 3) {
                     resultType = "stablePartner";
                 }
            }
            
            if (userInfo.relationshipStatus.includes("single")) {
                if (typeScores.independentSoul > 0 && maxScore - typeScores.independentSoul < 3) {
                     resultType = "independentSoul";
                }
            }
            return resultType;
        }
        
        // 应用状态
        const appState = {
            currentPage: "intro",
            currentQuestion: 0,
            answers: new Array(questions.length).fill(null),
            resultType: "romanticExplorer",
            userInfo: {
                birthdate: "",
                age: 0,
                zodiac: "",
                gender: "",
                relationshipStatus: "",
                previousExperience: ""
            }
        };
        
        // DOM元素
        const pages = {
            intro: document.getElementById("intro"),
            info: document.getElementById("info"),
            test: document.getElementById("test"),
            result: document.getElementById("result")
        };
        
        const navLinks = document.querySelectorAll(".nav-links a");
        const startTestBtn = document.getElementById("start-test");
        const backToIntroBtn = document.getElementById("back-to-intro");
        const userInfoForm = document.getElementById("user-info-form");
        const prevBtn = document.getElementById("prev-btn");
        const nextBtn = document.getElementById("next-btn");
        const submitBtn = document.getElementById("submit-btn");
        const restartBtn = document.getElementById("restart-btn");
        const questionText = document.getElementById("question-text");
        const optionsContainer = document.getElementById("options-container");
        const progressFill = document.getElementById("progress-fill");
        const questionCounter = document.getElementById("question-counter");
        const userInfoSummary = document.getElementById("user-info-summary");
        const idealPartnerDetails = document.getElementById("ideal-partner-details");
        
        // 页面切换
        function switchPage(pageId) {
            Object.values(pages).forEach(page => {
                page.classList.remove("active");
            });
            
            pages[pageId].classList.add("active");
            
            navLinks.forEach(link => {
                if (link.dataset.page === pageId) {
                    link.classList.add("active");
                } else {
                    link.classList.remove("active");
                }
            });
            
            appState.currentPage = pageId;
            
            if (pageId === "test") {
                initializeQuestion();
                window.scrollTo(0, 0);
            }
            
            if (pageId === "result") {
                displayResult();
                window.scrollTo(0, 0);
            }
        }
        
        // 初始化题目
        function initializeQuestion() {
            const question = questions[appState.currentQuestion];
            questionText.textContent = `${appState.currentQuestion + 1}. ${question.text}`;
            
            const progress = ((appState.currentQuestion + 1) / questions.length) * 100;
            progressFill.style.width = `${progress}%`;
            questionCounter.textContent = `${appState.currentQuestion + 1}/${questions.length}`;
            
            optionsContainer.innerHTML = "";
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement("div");
                optionElement.className = "option-item";
                if (appState.answers[appState.currentQuestion] === index) {
                    optionElement.classList.add("selected");
                }
                
                optionElement.innerHTML = `
                    <div class="option-marker"></div>
                    <div class="option-text">${option}</div>
                `;
                
                optionElement.addEventListener("click", () => selectOption(index));
                optionsContainer.appendChild(optionElement);
            });
            
            updateButtonStates();
        }
        
        // 选中与自动跳转逻辑
        function selectOption(optionIndex) {
            const options = document.querySelectorAll(".option-item");
            options.forEach(option => option.classList.remove("selected"));
            
            options[optionIndex].classList.add("selected");
            
            appState.answers[appState.currentQuestion] = optionIndex;
            
            updateButtonStates();
            
            setTimeout(() => {
                if (appState.currentQuestion < questions.length - 1 && appState.currentPage === 'test') {
                     appState.currentQuestion++;
                     initializeQuestion();
                } else if (appState.currentQuestion === questions.length - 1) {
                    submitBtn.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }, 300);
        }
        
        function updateButtonStates() {
            if (appState.currentQuestion === 0) {
                prevBtn.disabled = true;
                prevBtn.style.opacity = "0.5";
                prevBtn.style.cursor = "not-allowed";
            } else {
                prevBtn.disabled = false;
                prevBtn.style.opacity = "1";
                prevBtn.style.cursor = "pointer";
            }
            
            const hasAnswer = appState.answers[appState.currentQuestion] !== null;
            
            if (appState.currentQuestion === questions.length - 1) {
                nextBtn.style.display = "none";
                submitBtn.style.display = "flex";
                submitBtn.disabled = !hasAnswer;
                submitBtn.classList.toggle("disabled", !hasAnswer);
            } else {
                nextBtn.style.display = "flex";
                submitBtn.style.display = "none";
                nextBtn.disabled = !hasAnswer;
                nextBtn.classList.toggle("disabled", !hasAnswer);
            }
        }
        
        // 渲染雷达图函数 (新增)
        function renderRadarChart(data) {
            const ctx = document.getElementById('radarChart').getContext('2d');
            
            // 销毁旧实例防止重叠
            if (radarChartInstance) {
                radarChartInstance.destroy();
            }

            radarChartInstance = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['浪漫度', '忠诚度', '独立性', '激情值', '沟通力'],
                    datasets: [{
                        label: '恋爱人格维度',
                        data: data,
                        fill: true,
                        backgroundColor: 'rgba(156, 39, 176, 0.2)',
                        borderColor: '#9c27b0',
                        pointBackgroundColor: '#e91e63',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: '#e91e63'
                    }]
                },
                options: {
                    responsive: true,
                    elements: {
                        line: { borderWidth: 3 }
                    },
                    scales: {
                        r: {
                            angleLines: { color: 'rgba(0,0,0,0.1)' },
                            grid: { color: 'rgba(0,0,0,0.05)' },
                            pointLabels: {
                                font: { size: 14, family: "'PingFang SC', sans-serif" },
                                color: '#6a1b9a'
                            },
                            suggestedMin: 0,
                            suggestedMax: 100
                        }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
        }

        // 显示结果
        function displayResult() {
            appState.resultType = calculateResultType(appState.answers, appState.userInfo);
            const result = resultTypes[appState.resultType];
            
            const relationshipStatusMap = {
                "single": "单身，正在寻找伴侣",
                "single_no_looking": "单身，但不急于恋爱",
                "dating": "正在约会/暧昧中",
                "relationship": "恋爱中",
                "engaged": "已订婚",
                "married": "已婚",
                "separated": "分居/冷静期",
                "divorced": "离异",
                "widowed": "丧偶"
            };
            
            userInfoSummary.innerHTML = `
                <div class="user-info-item">
                    <div class="user-info-label">年龄</div>
                    <div class="user-info-value">${appState.userInfo.age}岁</div>
                </div>
                <div class="user-info-item">
                    <div class="user-info-label">星座</div>
                    <div class="user-info-value">${appState.userInfo.zodiac}</div>
                </div>
                <div class="user-info-item">
                    <div class="user-info-label">性别</div>
                    <div class="user-info-value">${appState.userInfo.gender === "female" ? "女性" : appState.userInfo.gender === "male" ? "男性" : "其他"}</div>
                </div>
                <div class="user-info-item">
                    <div class="user-info-label">恋爱状态</div>
                    <div class="user-info-value">${relationshipStatusMap[appState.userInfo.relationshipStatus] || appState.userInfo.relationshipStatus}</div>
                </div>
            `;
            
            // 优化：使用病毒式标题和语录
            document.getElementById("result-type-title").textContent = result.title;
            document.getElementById("barnum-quote").textContent = `"${result.barnumQuote}"`;
            document.getElementById("result-type-desc").textContent = result.description;
            
            // 绘制雷达图
            renderRadarChart(result.chartData);

            document.getElementById("personality-description").innerHTML = result.personality;
            document.getElementById("strengths-description").innerHTML = result.strengths;
            document.getElementById("advice-description").innerHTML = result.advice;
            document.getElementById("matching-description").innerHTML = result.matching;
            
            const traitsContainer = document.getElementById("traits-container");
            traitsContainer.innerHTML = "";
            result.traits.forEach(trait => {
                const traitElement = document.createElement("div");
                traitElement.className = "trait-item";
                traitElement.textContent = trait;
                traitsContainer.appendChild(traitElement);
            });
            
            const idealPartnerTraits = generateIdealPartnerProfile(appState.userInfo, appState.resultType);
            idealPartnerDetails.innerHTML = "";
            idealPartnerTraits.forEach(trait => {
                const traitElement = document.createElement("div");
                traitElement.className = "partner-trait";
                traitElement.textContent = trait;
                idealPartnerDetails.appendChild(traitElement);
            });
        }
        
        // 导航事件
        navLinks.forEach(link => {
            link.addEventListener("click", (e) => {
                e.preventDefault();
                const pageId = link.dataset.page;
                if (pageId === "result" && appState.answers.filter(a => a !== null).length === 0) {
                     alert("请先完成测试哦！");
                     return;
                }
                switchPage(pageId);
            });
        });
        
        startTestBtn.addEventListener("click", () => switchPage("info"));
        backToIntroBtn.addEventListener("click", () => switchPage("intro"));
        
        userInfoForm.addEventListener("submit", (e) => {
            e.preventDefault();
            const birthdate = document.getElementById("birthdate").value;
            const gender = document.getElementById("gender").value;
            const relationshipStatus = document.getElementById("relationship-status").value;
            const previousExperience = document.getElementById("previous-experience").value;
            
            if (!birthdate || !gender || !relationshipStatus) {
                alert("请填写所有必填信息");
                return;
            }
            
            appState.userInfo = {
                birthdate,
                age: calculateAge(birthdate),
                zodiac: calculateZodiac(birthdate),
                gender,
                relationshipStatus,
                previousExperience
            };
            
            switchPage("test");
        });
        
        prevBtn.addEventListener("click", () => {
            if (appState.currentQuestion > 0) {
                appState.currentQuestion--;
                initializeQuestion();
            }
        });
        
        nextBtn.addEventListener("click", () => {
            if (appState.currentQuestion < questions.length - 1 && appState.answers[appState.currentQuestion] !== null) {
                appState.currentQuestion++;
                initializeQuestion();
            }
        });
        
        submitBtn.addEventListener("click", () => {
            const unanswered = appState.answers.filter(answer => answer === null);
            if (unanswered.length > 0) {
                if (confirm(`您还有${unanswered.length}道题目未回答，确定要提交吗？建议完成所有题目以获得准确结果。`)) {
                    switchPage("result");
                }
            } else {
                switchPage("result");
            }
        });
        
        restartBtn.addEventListener("click", () => {
            if(confirm("确定要重新测试吗？当前进度将丢失。")) {
                appState.currentQuestion = 0;
                appState.answers = new Array(questions.length).fill(null);
                switchPage("info");
            }
        });

        // 分享按钮逻辑（使用新标题）
        document.querySelector('.share-button').addEventListener('click', (e) => {
            e.preventDefault();
            // 抓取病毒式标题
            const title = resultTypes[appState.resultType].title;
            const text = `我在恋爱画像测试中测出我是【${title}】！\n快来测测你的恋爱人格和灵魂伴侣吧：${window.location.href}`;
            
            if (navigator.share) {
                navigator.share({
                    title: '恋爱画像测试',
                    text: text,
                    url: window.location.href,
                }).catch(console.error);
            } else {
                navigator.clipboard.writeText(text).then(() => {
                    alert('🎉 测试结果链接已复制到剪贴板！\n快去分享给好友，看看你们配不配~');
                }).catch(() => {
                    alert('请长按浏览器地址栏复制链接分享哦！');
                });
            }
        });
        
        // 初始化应用
        function initializeApp() {
            const today = new Date().toISOString().split("T")[0];
            document.getElementById("birthdate").max = today;
            
            const hundredYearsAgo = new Date();
            hundredYearsAgo.setFullYear(hundredYearsAgo.getFullYear() - 100);
            document.getElementById("birthdate").min = hundredYearsAgo.toISOString().split("T")[0];
            
            switchPage("intro");
            
            let touchStartX = 0;
            let touchEndX = 0;
            
            document.addEventListener('touchstart', e => {
                touchStartX = e.changedTouches[0].screenX;
            }, false);
            
            document.addEventListener('touchend', e => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            }, false);
            
            function handleSwipe() {
                if (Math.abs(touchEndX - touchStartX) > 50) {
                    if (touchEndX < touchStartX && appState.currentPage === "test") {
                        if (appState.currentQuestion < questions.length - 1 && appState.answers[appState.currentQuestion] !== null) {
                            appState.currentQuestion++;
                            initializeQuestion();
                        }
                    }
                    else if (touchEndX > touchStartX && appState.currentPage === "test") {
                        if (appState.currentQuestion > 0) {
                            appState.currentQuestion--;
                            initializeQuestion();
                        }
                    }
                }
            }
        }
        
        document.addEventListener("DOMContentLoaded", initializeApp);
    </script>
</body>
<div class="modal-overlay" id="authModal">
    <div class="auth-card">
        <h2 style="margin-top:0; color:#333;">访问受限</h2>
        <p style="color:#666; font-size:14px;">本量表为专业版，请输入兑换码解锁。</p>
        
        <input type="tel" id="redeemCode" class="auth-input" placeholder="请输入8位兑换码" maxlength="8">
        
        <button class="btn-verify" onclick="verifyRedeemCode()">立即验证</button>
        
        <a href="https://www.xiaohongshu.com" target="_blank" class="btn-xhs-link">
            没有兑换码？去小红书获取 &gt;
        </a>
    </div>
</div>
</html>